<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', path='css/main.css') }}">
    <script>
      window.onload = () => {
        // Весь код отсюда будет выполнен, только когда полностью завершится загрузка страницы
        let allProduct = document.getElementById('allProduct');
        let oneProduct = document.getElementById('oneProduct');
        // oneProduct.removeAttribute('id');
        for(let i = 0; i < 9; i++){
          // allProduct.appendChild(oneProduct);
          let clone = oneProduct.cloneNode(true);
          // Удаляем или изменяем id, чтобы не было дублирования
          clone.removeAttribute('id');
          // Или, например, задать новый id:
          // clone.id = 'oneProduct' + i;
          allProduct.appendChild(clone);
        }
      };
    </script>
</head>
<body>
    <header class=" text-bg-white ">
        <div class="container headerMain " >
          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start ">
            
    
            <a href="/ads/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none ">
                <img src="{{ url_for('static', path='image/tpuLogo.png') }}" alt="LOGO" width="70px">
                <span class="mainName">Базар</span>
            </a>
    
            <form class="col-12 col-lg-3 mb-3 mb-lg-0 me-lg-3 inputMainLocation" role="search">
              <input type="search" class=" inputMain " placeholder="Поиск" ><!-- form-control-->
              <!-- <img src="image/Lupa.webp" alt="" class="lupa" height="35px"> -->
            </form>
            
            <!-- <img src="image/Lupa.webp" alt="" class="lupa" height="35px"> -->
            <div class="text-end ">
              <a href="newProduct"><button class="buttonHeader">Разместить объявление</button></a>
              <a href="profileInfo.html"><button class="buttonHeader">Профиль</button></a>
            </div>
          </div>
        </div>
    </header>
    <main class=" ">
        <div class="container main2">
            <div class="fotoMain">
                <img src="static/image/noLogoItem.webp" alt="noLogo" width="100%">
            </div>
            <div class="container px-4 py-5" id="custom-cards">
                <h2 class="category">Категории</h2>
            
                <div class="row row-cols-1 row-cols-lg-6 align-items-stretch g-4 py-5">
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  <div class="col ">
                    <div class=" overflow-hidden itemBorder ">
                      <div class="d-flex flex-column h-100 ">
                        <!-- <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold">Short title, long jacket</h3> -->
                        <img src="static/image/noLogoItem900.png" alt="" class="">
                        <p class="itemText">Название</p>
                      </div>
                    </div>
                  </div>
                  
                </div>
            </div>
            <div class="container px-4 py-5" id="custom-cards">
                <h2 class="announcementAround">Объявления рядом</h2>
            
                <div id="allProduct" class="row row-cols-1 row-cols-lg-5 align-items-stretch g-4 py-5">
                    <!-- Динамическая подгрузка объявлений через JS -->
                </div>
                
                  
            </div>
        </div>
        
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        fetch('/ads/json')
            .then(response => response.json())
            .then(data => {
                const allProduct = document.getElementById('allProduct');
                allProduct.innerHTML = '';
                data.forEach(ad => {
                    const col = document.createElement('div');
                    col.className = 'col product';
                    col.innerHTML = `
                        <div class="overflow-hidden productBorder">
                            <div class="d-flex flex-column p-3">
                                <img src="${ad.photos && ad.photos[0] ? ad.photos[0] : 'static/image/noLogoItem900.png'}" alt="" class="">
                                <span>${ad.title}</span>
                                <p class="spanProduct">${ad.price} ₽</p>
                                <a href="/ads/products?id=${ad.id}"><button class="buttonProduct"><span class="buttonProductText">Просмотр</span></button></a>
                            </div>
                        </div>
                    `;
                    allProduct.appendChild(col);
                });
            });
    });
    </script>
    <script src="/ads/static/js/indexB.js"></script>
</body>
</html>